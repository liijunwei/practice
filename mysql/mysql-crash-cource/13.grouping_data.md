+ 问题: 如何分组数据?

+ 关键字: `group by` 字句
+ 关键字: `having` 字句

+ 数据分组

分组允许把数据分为多个逻辑组, 以便对每个组进行聚集计算

```sql
-- 返回供应商1003提供的产品数目
select count(*) as num_prods from products where vend_id = 1003;

-- 问题: 怎么返回每个供应商提供的产品数目?
-- 问题: 怎么返回只提供单项产品的供应商所提供的产品?
-- 问题: 怎么返回10个以上产品的供应商?
```

+ 创建分组

```sql
select * from products;
select count(*) from products;
select vend_id, count(*) as num_prods from products group by vend_id;
select vend_country , count(*) from vendors group by vend_country;

-- vend_id 为某个列(字段)
-- num_prods 为计算字段

```
> group by 字句指示mysql按vend_id**排序并分组数据**, 这导致对每个vend_id计算num_prods, 而不是对整个表计算一次num_prods

`group by` 字句指示mysql分组数据, 然后对每个组而不是整个结果集进行聚集

+ 使用 `group by` 子句的一些重要规定
    + group by 子句可以包含任意数目的列, 这使得能对分组进行嵌套, 为数据分组提供更细致的控制
    + 如果在group by子句中潜逃了分组, 数据将在最后规定的分组上进行汇总; 换句话说, 在建立分组时, 指定的所有列都一起计算, 所以不能从个别的列取回数据
    + group by子句中列出的每个列都必须是检索列或有效的表达式(但不能是聚集函数); 如果在select中使用表达式, 则必须在group by子句中指定相同的表达式, 不能使用别名;
    + 除聚集计算语句外, select 语句中的每个列都必须在group by子句中给出
    + 如果分组列中具有NULL值, 则NULL将作为一个分组返回; 如果列中有多行NULL值, 他们将被分为一组
    + group by子句必须出现在where子句之后, order by子句之前



