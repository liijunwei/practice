### [反范式化表设计](https://www.imooc.com/video/1939)

+ 定义: 所谓反范式化(针对范式化而言)就是为了性能和读取效率的考虑, 而适当的对第三范式的要求进行违反, 而允许存在少量的数据冗余, 即用空间换时间

#### 示例.符合范式化的设计

+ 用户表b
    + 用户ID
    + 姓名
    + 电话
    + 用户ID
    + 地址
    + 邮编

+ 订单表a
    + 订单ID
    + 用户ID
    + 下单时间
    + 支付类型
    + 订单状态

+ 订单商品表c
    + 订单ID
    + 商品ID
    + 商品数量
    + 商品价格

+ 商品表
    + 商品ID
    + 名称
    + 描述
    + 过期时间

+ 问题: 如何查询订单信息?

```sql
SELECT b.用户名, b.电话, b.地址, a.订单ID, SUM(c.商品价格 * c.商品数量) as 订单价格
FROM 订单表 a
INNER JOIN 用户表 b
ON a.用户ID = b.用户ID
GROUP BY b.用户名, b.电话, b.地址, a.订单ID
```

+ 问题: 如何查询订单详情?

#### 示例.反范式化的设计

+ 用户表
    + 用户ID
    + 姓名
    + 电话
    + 用户ID
    + 地址
    + 邮编

+ 订单表
    + 订单ID
    + 用户ID
    + 下单时间
    + 支付类型
    + 订单状态
    + 订单价格
    + 姓名
    + 地址
    + 电话

+ 订单商品表
    + 订单ID
    + 商品ID
    + 商品数量
    + 商品价格
    + 商品名称
    + 过期时间

+ 商品表
    + 商品ID
    + 名称
    + 描述
    + 过期时间

+ 问题: 如何查询订单信息?
+ 问题: 如何查询订单详情?

### 为什么反范式化?

+ 减少表的数量

+ 增加数据的读取效率

+ 反范式化一定要适度



