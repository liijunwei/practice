### [第一范式(1NF)](https://www.imooc.com/video/1915)

定义: 数据库表中的所有字段都是单一属性, 不可再分的

这个单一属性是由基本的数据类型所构成的, 如整数, 浮点数, 字符串等等;

换句话说: 第一范式要求数据库中的表都是二维表(我理解都是一维表...  = = )

> 所谓的二维表, 就是由行和列组成的表

### [第二范式(2NF)](https://www.imooc.com/video/1916)

定义: 数据库的表中 不存在非关键字段 对任一候选关键字段的 **部分函数依赖**
(读起来这么绕吗?)

**部分函数依赖是指 存在着组合关键字中的某一关键字决定非关键字的情况**

换句话说: 所有单关键字段的表都符合第二范式

商品名称|供应商名称|价格|描述|重量|供应商电话|有效期   |分类
--------|----------|----|----|----|----------|---------|--------
可乐    | 饮料1厂  | 3  |    |250g|8888888   | 20210-11|饮料
可乐    | 饮料2厂  | 3  |    |250g|6666666   | 20210-11|饮料

#### 分析:

+ 商品 和 供应商 是多对多关系
+ 该表中, `商品名称+供应商名称` 能作为唯一标识

+ 上表中存在的 "部分函数依赖关系":
    + 商品相关的信息: 价格, 描述, 重量, 有效期(非关键字)等 依赖了关键信息(唯一标识)里的一部分
    + 供应商相关的信息: 供应商电话等 依赖了关键信息(唯一标识)里的一部分

+ 存在的问题(如果表中少了联合主键中的任何一个, 就会出现问题...):
    + 插入异常
    + 删除异常
    + 更新异常
    + 数据冗余

#### 如何优化

把上表拆分为下面的表

+ 商品信息表

商品ID|商品名称|价格|描述|重量|有效期   |分类
------|--------|----|----|----|---------|-------
1     |可乐    | 3  |    |250g| 20210-11|饮料
2     |果汁    | 3  |    |250g| 20210-11|饮料

+ 供应商信息表

供应商ID|供应商名称|供应商电话
--------|----------|----------
1       | 饮料1厂  |8888888
2       | 饮料2厂  |6666666

+ 供应商-商品 关联表

供应商ID|商品ID
--------|-------
1       | 1
2       | 2


### [第三范式(3NF)](https://www.imooc.com/video/1917)

定义: 在第二范式的基础上, 如果数据表中不存在非关键字段对任意候选关键字段的 **传递函数依赖** 则符合第三范式
(???)


#### 实例

商品名称|价格|描述|重量 |有效期  |分类|分类描述
--------|----|----|-----|--------|----|---------
可乐    | 3  |    |250g |20210-11|饮料|碳酸饮料
果汁    | 8  |    |250ml|20210-11|饮料|水果


存在以下传递函数依赖关系:

+ 商品名称 -> 分类 -> 分类描述
+ 名称决定商品所属的分类, 分类决定了分类的描述
+ 所以说分类描述被迫依赖了商品的名称(?)

+ 存在非关键字段(`分类描述`)对关键字段(`商品名称`)的传递函数依赖

#### 问题分析

+ 分类/分类描述 对于每个商品都会进行记录, 存在数据冗余;
+ 插入异常
+ 更新异常
+ 删除异常

#### 如何优化

把上表拆分为下面的表

+ 商品信息表

商品ID|商品名称|价格|描述|重量|有效期
------|--------|----|----|----|---------
1     |可乐    | 3  |    |250g| 20210-11
2     |果汁    | 3  |    |250g| 20210-11

+ 分类信息表

分类ID|分类     |分类描述
------|---------|----------
1     |酒水饮料 |碳酸饮料

+ 分类-商品 关联表

分类ID|商品ID
------|--------
1     |1


### [BC范式(BCNF)](https://www.imooc.com/video/1918)

`Boyce.Codd 范式`

定义: 在第三范式的基础上, 数据库表中如果不存在任何字段对任意候选关键字段的传递函数依赖, 则符合BC范式

也就是说, 如果是复合关键字, 则复合关键字之间也不能存在函数依赖关系

#### 以商品和供应商之间的关系表来说明BCNF

供应商名称|商品ID|供应商联系人|商品数量
----------|------|------------|--------
饮料1厂   |1     |张三        |10
饮料1厂   |2     |李四        |20
饮料1厂   |1     |王五        |20

假定: 供应商联系人只能受雇与一家供应商, 每家供应商可以供应多个商品, 则存在如下决定关系

+ 如果以(供应商, 商品ID)为主键, 可以决定 (联系人, 商品数量)
+ 如果以(联系人, 商品ID)为主键, 可以决定 (供应商, 商品数量)

并且还存在下列关系:

+ 供应商       可以决定 供应商联系人
+ 供应商联系人 可以决定 供应商

因此不符合BCNF要求

并且存在数据操作异常 及 数据冗余

#### 如何优化

把上表拆分为下面的表

+ 供应商-商品 关联表

供应商名称|商品ID|商品数量
----------|------|--------
饮料1厂   |1     |10
饮料1厂   |2     |20
饮料1厂   |1     |20

+ 供应商-联系人 关联表

供应商名称|供应商联系人
----------|------------
饮料1厂   |张三
饮料1厂   |李四
饮料1厂   |王五

+ 商品信息表

商品ID | 商品名称 | 商品描述
-------|----------|-------------------
1      | CokeCola | Taste The Feeling

