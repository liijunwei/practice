20220808

+ 本章会探讨如何使用几种不同类型的程序优化技术, 使程序运行的更快

+ 编写高效的程序需要做到以下几点:
    1. 选择一组适当的算法和数据结构
    2. 编写出编译器能够有效优化, 以转换成高效可执行代码的源代码(理解优化编译器的能力和局限性非常重要; 有些编程语言比其他语言容易优化); 程序员经常能够以一种是编译器更容易产生高效代码的方式来编写他们的程序
    3. 针对处理运算量特别大的计算, 将一个任务分成多个部分, 这些部分可以在多核和多处理器的某种组合上并行地计算

+ 通常程序员必须在实现和维护程序的简单性与它的运行速度之间做出权衡

+ 理想情况下, 编译器能接受我们编写的任何代码并产生尽可能高效的/具有指定行为的机器级程序; 但是即使最好的编译器也受到`妨碍优化`(optimization blocker)的因素的阻碍, 妨碍优化的因素就是程序行为中那些严重依赖与执行环境的方面; 程序员必须编写容易优化的代码, 以帮助编译器

+ 程序优化的第1步: 消除不必要的工作, 让代码尽可能有效地执行所期望的任务
    + 包括 消除不必要的函数调用/条件测试/内存引用
+ 程序优化的第2步: 利用处理器提供的指令级病性能力(instruction-level parallelism), 同时执行多条指令

+ 代码剖析程序(profiler): 测量代码各部分性能的工具, 它能帮我们找到代码中低效率的部分, 并且确定程序中我们应该着重优化的部分

+ 研究程序的汇编代码表示也是理解编译器一级产生的代码会如何云心工单最有效手段之一

# 5.1 优化编译器的能力和局限性

+ "内存别名使用(memory aliasing)"

+ csapp/ch05.优化程序性能/twiddle_demo.c
    + make dangerous_twiddle_demo

+ 包含函数调用的代码可以用一个称为 "内联函数替换(inline substitution, )"

