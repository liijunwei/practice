第二部分: 在系统上运行程序

20220823


# 7.5 符号和符号表

+ "C程序员使用static属性隐藏模块内部的变量和函数声明, 就像你在java和c++中使用public/private声明一样; 在C中, 原文件扮演模块的角色. 任何带有static属性声明的全局变量或者函数都是模块私有的. 类似的, 任何不带static属性声明的全局变量和函数声明都是公共的, 可以被其他模块访问; 尽可能使用static属性来保护你的变量和函数是很好的编程习惯"

# 7.6 符号解析

## 7.6.1 链接器如何解析多重定义的全局符号

根据强弱符号的定义, linux链接器使用下面的规则来处理多重定义的符号名
+ 规则1: 不允许有多个同名的强符号
+ 规则2: 如果有一个强符号和多个弱符号同名, 那么选择强符号
+ 规则3: 如果有多个弱符号同名, 那么从这些弱符号中任意选择一个

+ ELF: Executable and Linkable Format

# 7.9 加载可执行目标文件

```bash
$ ./prog
$ ./a.out
```

+ prog/a.out 不是内置的shell命令, 所以shell会认为prog是一个可执行目标文件, 通过调用某个驻留在存储器中称为加载器(loader)的操作系统代码来运行它

+ 任何linux程序都可以通过调用`execve`函数来调用加载器
    + man execve

+ 这个将程序复制到内存并运行的过程叫做"加载"


