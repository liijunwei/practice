You have a type code that affects the behavior of a class and the type code changes at runtime.

*Replace the type code with a state object.*

TODO not clear on these 3 `replace type code with xxx` trick...
